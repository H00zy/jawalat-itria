<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>جولات عطرية - دخول</title>

<style>
:root{
  --bg:#E6EEE9;
  --deep:#0B3D2E;
  --mid:#1F6B52;
  --card:#ffffffee;
  --stroke:#cfe1da;
  --danger1:#7c1f1f;
  --danger2:#5a1414;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family: system-ui, -apple-system, "Segoe UI", Tahoma, Arial;
  background:#f4f4f4;
  padding:22px;
}

.shell{
  max-width:1100px;
  margin:auto;
  background:var(--bg);
  border:1px solid var(--stroke);
  border-radius:18px;
  padding:24px;
  box-shadow:0 20px 60px rgba(0,0,0,.12);
  position:relative;
  overflow:hidden;
}

.shell::before{
  content:"";
  position:absolute; inset:0;
  background-image:
    repeating-radial-gradient(circle at 30% 30%,
      rgba(11,61,46,.06) 0 1px,
      transparent 1px 28px),
    repeating-radial-gradient(circle at 70% 65%,
      rgba(11,61,46,.05) 0 1px,
      transparent 1px 32px);
  opacity:.55;
  pointer-events:none;
}

.header{
  position:relative;
  display:flex;
  justify-content:center;
  margin-bottom:14px;
}

.logo{
  width:min(520px, 92vw);
  height:auto;
  display:block;
  filter: drop-shadow(0 10px 25px rgba(0,0,0,.10));
}

.card{
  position:relative;
  margin:auto;
  max-width:720px;
  background:var(--card);
  border:1px solid var(--stroke);
  border-radius:18px;
  padding:18px;
  box-shadow:0 14px 40px rgba(0,0,0,.08);
}

.title{
  margin:0 0 12px 0;
  color:var(--deep);
  font-weight:1000;
  font-size:22px;
  text-align:center;
}

.row{
  display:flex;
  gap:10px;
  align-items:center;
  flex-wrap:wrap;
  justify-content:center;
  margin-top:10px;
}

.label{
  font-weight:900;
  color:rgba(11,61,46,.85);
}

.input{
  width:min(420px, 92vw);
  background:#fff;
  border:1px solid var(--stroke);
  border-radius:14px;
  padding:12px 12px;
  font-weight:900;
  outline:none;
}

.input:focus{
  border-color: rgba(11,61,46,.35);
  box-shadow: 0 0 0 3px rgba(11,61,46,.12);
}

.btnRow{
  display:flex;
  gap:10px;
  justify-content:center;
  flex-wrap:wrap;
  margin-top:14px;
}

.btn{
  min-width:180px;
  border:1px solid rgba(11,61,46,.25);
  background: linear-gradient(180deg, var(--mid), #16604a);
  color:#fff;
  font-weight:1000;
  padding:12px 14px;
  border-radius:14px;
  cursor:pointer;
  transition:.15s;
}
.btn:hover{ transform: translateY(-1px); }
.btn:active{ transform: translateY(0); opacity:.96; }

.btn.secondary{
  background:#fff;
  color:var(--deep);
}

.msg{
  text-align:center;
  font-weight:1000;
  margin-top:10px;
  color:var(--danger1);
}

.hidden{ display:none; }
</style>
</head>

<body>
<div class="shell">

  <div class="header">
    <img class="logo" src="images/logo.png" alt="جولات عطرية">
  </div>

  <div class="card" id="step1">
    <div class="title">الدخول</div>

    <div class="row">
      <span class="label">كلمة المرور</span>
    </div>
    <div class="row">
      <input id="pw" class="input" type="password" placeholder="اكتب كلمة المرور..." autocomplete="off">
    </div>

    <div class="btnRow">
      <button class="btn" id="checkBtn">دخول</button>
    </div>

    <div class="msg" id="pwMsg"></div>
  </div>

  <div class="card hidden" id="step2">
    <div class="title">أسماء المتسابقين</div>

    <div class="row">
      <span class="label">المتسابق 1</span>
    </div>
    <div class="row">
      <input id="p1" class="input" placeholder="اكتب اسم المتسابق الأول...">
    </div>

    <div class="row" style="margin-top:14px">
      <span class="label">المتسابق 2</span>
    </div>
    <div class="row">
      <input id="p2" class="input" placeholder="اكتب اسم المتسابق الثاني...">
    </div>

    <div class="btnRow">
      <button class="btn" id="startBtn">ابدأ</button>
      <button class="btn secondary" id="backBtn">رجوع</button>
    </div>

    <div class="msg" id="nameMsg"></div>
  </div>

</div>

<script>
const PASSWORD = "Ch1Q1"; // ✅ حسب طلبك

const step1 = document.getElementById("step1");
const step2 = document.getElementById("step2");
const pw = document.getElementById("pw");
const pwMsg = document.getElementById("pwMsg");

const p1 = document.getElementById("p1");
const p2 = document.getElementById("p2");
const nameMsg = document.getElementById("nameMsg");

function showStep(n){
  step1.classList.toggle("hidden", n !== 1);
  step2.classList.toggle("hidden", n !== 2);
  pwMsg.textContent = "";
  nameMsg.textContent = "";
}

document.getElementById("checkBtn").addEventListener("click", ()=>{
  const v = (pw.value || "").trim();
  if(v !== PASSWORD){
    pwMsg.textContent = "كلمة المرور غير صحيحة.";
    return;
  }
  // ✅ تخزين حالة الدخول للجلسة فقط
  sessionStorage.setItem("jawalat_authed", "1");
  showStep(2);
  p1.focus();
});

pw.addEventListener("keydown", (e)=>{
  if(e.key === "Enter") document.getElementById("checkBtn").click();
});

document.getElementById("backBtn").addEventListener("click", ()=>{
  showStep(1);
  pw.focus();
});

document.getElementById("startBtn").addEventListener("click", ()=>{
  const n1 = (p1.value || "").trim();
  const n2 = (p2.value || "").trim();

  if(!n1 || !n2){
    nameMsg.textContent = "لازم تكتب اسم المتسابقين الاثنين.";
    return;
  }

  // ✅ تخزين أسماء اللاعبين للجلسة
  sessionStorage.setItem("jawalat_p1", n1);
  sessionStorage.setItem("jawalat_p2", n2);

  // إلى صفحة اختيار الجولة
  window.location.href = "rounds.html";
});

// لو كان المستخدم دخل قبل في نفس الجلسة
if(sessionStorage.getItem("jawalat_authed") === "1"){
  showStep(2);
}
</script>
</body>
</html>
